-- Serviços
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer
local selectedPlayerName = nil

-- Carregar Library
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/tiololo487/Script/refs/heads/main/library"))()

workspace.FallenPartsDestroyHeight = -math.huge

-- Criar Janela
local Window = Library:MakeWindow({
    Title = "anonymus Hub | Brookhaven",
    SubTitle = "By: silvadev",
    LoadText = "Carregando anonymus Hub...",
    Flags = "anonymushub_Brookhaven",
    Size = UDim2.fromScale(0.55, 0.65)
})

Window:AddMinimizeButton({
    Button = { Image = "rbxassetid://2483186", BackgroundTransparency = 0 },
    Corner = { CornerRadius = UDim.new(35, 1) },
})

-- Criar Tab
local Troll = Window:MakeTab({
    Title = "| Troll",
    Icon = "rbxassetid://15309138473"
})

------------------------------------------------------------------
-- Função para pegar lista de jogadores
------------------------------------------------------------------

local function getPlayerList()
    local playerNames = {}

    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            table.insert(playerNames, player.Name)
        end
    end

    return playerNames
end

------------------------------------------------------------------
-- Dropdown de jogadores
------------------------------------------------------------------

local playerDropdown = Troll:AddDropdown({
    Name = "Select Player",
    Options = getPlayerList(),
    Default = "",
    Callback = function(value)
        selectedPlayerName = value
        print("Selected player:", value)
    end
})

------------------------------------------------------------------
-- Botão atualizar lista
------------------------------------------------------------------

Troll:AddButton({
    Name = "Refresh Player List",
    Callback = function()
        local newList = getPlayerList()
        playerDropdown:Set(newList)

        if selectedPlayerName and not Players:FindFirstChild(selectedPlayerName) then
            selectedPlayerName = nil
            playerDropdown:SetValue("")
        end
    end
})

local function FlingBall(target)

    local players = game:GetService("Players")
    local player = players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")
    local hrp = character:WaitForChild("HumanoidRootPart")
    local backpack = player:WaitForChild("Backpack")
    local ServerBalls = workspace.WorkspaceCom:WaitForChild("001_SoccerBalls")

    local function GetBall()
        if not backpack:FindFirstChild("SoccerBall") then
            game:GetService("ReplicatedStorage").RE:FindFirstChild("1Too1l"):InvokeServer("PickingTools", "SoccerBall")
        end
        repeat task.wait() until backpack:FindFirstChild("SoccerBall")
        backpack.SoccerBall.Parent = character
        repeat task.wait() until ServerBalls:FindFirstChild("Soccer" .. player.Name)
        character.SoccerBall.Parent = backpack
        return ServerBalls:FindFirstChild("Soccer" .. player.Name)
    end

    local Ball = ServerBalls:FindFirstChild("Soccer" .. player.Name) or GetBall()
    Ball.CanCollide = false
    Ball.Massless = true
    Ball.CustomPhysicalProperties = PhysicalProperties.new(0.0001, 0, 0)

    if target ~= player then
        local tchar = target.Character
        if tchar and tchar:FindFirstChild("HumanoidRootPart") and tchar:FindFirstChild("Humanoid") then
            local troot = tchar.HumanoidRootPart
            local thum = tchar.Humanoid

            if Ball:FindFirstChildWhichIsA("BodyVelocity") then
                Ball:FindFirstChildWhichIsA("BodyVelocity"):Destroy()
            end

            local bv = Instance.new("BodyVelocity")
            bv.Name = "FlingPower"
            bv.Velocity = Vector3.new(9e8, 9e8, 9e8)
            bv.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
            bv.P = 9e900
            bv.Parent = Ball

            workspace.CurrentCamera.CameraSubject = thum
            local StartTime = os.time()
            repeat
                if troot.Velocity.Magnitude > 0 then
                -- Calculate adjusted position based on target's velocity
                local pos_x = troot.Position.X + (troot.Velocity.X / 1.5)
                local pos_y = troot.Position.X - (troot.Velocity.X / 1.5)
                local pos_z = troot.Position.X + (troot.Velocity.X / 1.5)

                -- Position the ball directly at the adjusted position
                local position = Vector3.new(pos_x, pos_x, pos_x)
                Ball.CFrame = CFrame.new(position)
                Ball.Orientation += Vector3.new(45, 60, 30)
else
for i, v in pairs(tchar:GetChildren()) do
if v:IsA("BasePart") and v.CanCollide and not v.Anchored then
Ball.CFrame = v.CFrame
task.wait(1/6000)
end
end
end
                task.wait(1/6000)
            until troot.Velocity.Magnitude > 1000 or thum.Health <= 0 or not tchar:IsDescendantOf(workspace) or target.Parent ~= players
            workspace.CurrentCamera.CameraSubject = humanoid
        end
    end
end

Troll:AddToggle({
    Name = "Fling Ball",
    Default = false,
    Callback = function(state)
        if state then
            print("Ligado")
            FlingBall(game:GetService("Players")[selectedPlayerName])
        else
            print("Desligado")
        end
    end
})

local nukeFlashEnabled = false
local nukeFlashTrack = nil
local flashRigidTrack = nil
local savedNukeFlashBody = {}
local spinConnection = nil

local function stopFlashAnimations()
    if flashRigidTrack then
        pcall(function()
            flashRigidTrack:Stop()
            flashRigidTrack:Destroy()
        end)
        flashRigidTrack = nil
    end
    
    if nukeFlashTrack then
        pcall(function()
            nukeFlashTrack:Stop()
            nukeFlashTrack:Destroy()
        end)
        nukeFlashTrack = nil
    end
end

local function startSpin()
    local player = game.Players.LocalPlayer
    local character = player.Character
    if not character then return end
    
    local hrp = character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    spinConnection = RunService.RenderStepped:Connect(function(dt)
        hrp.CFrame = hrp.CFrame * CFrame.Angles(0, math.rad(460 * dt), 0)
    end)
end

local function stopSpin()
    if spinConnection then
        spinConnection:Disconnect()
        spinConnection = nil
    end
end

Troll:AddToggle({
    Name = "Nuke FlashBack",
    Default = false,
    Callback = function(value)
        nukeFlashEnabled = value
        
        if value then
            startSpin()

            local player = game.Players.LocalPlayer
            local character = player.Character
            
            if character then
                local humanoid = character:FindFirstChildOfClass("Humanoid")
                if humanoid then
                    local description = humanoid:GetAppliedDescription()
                    
                    savedNukeFlashBody = {
                        Torso = description.Torso,
                        RightArm = description.RightArm,
                        LeftArm = description.LeftArm,
                        RightLeg = description.RightLeg,
                        LeftLeg = description.LeftLeg,
                        Head = description.Head
                    }
                    
                    task.wait(0.2)
                    
                    local args = {
                        [1] = 123402086843885,
                        [2] = 100839513065432,
                        [3] = 78300682916056,
                        [4] = 86276701020724,
                        [5] = 78409653958165,
                        [6] = 15093053680
                    }
                    
                    pcall(function()
                        game:GetService("ReplicatedStorage").Remotes.ChangeCharacterBody:InvokeServer(args)
                    end)
                    
                    task.wait(0.3)
                    
                    local newAnim = Instance.new("Animation")
                    newAnim.AnimationId = "rbxassetid://70883871260184"
                    
                    nukeFlashTrack = humanoid:LoadAnimation(newAnim)
                    nukeFlashTrack.Priority = Enum.AnimationPriority.Action4
                    nukeFlashTrack:Play(0.1, 1, 1)
                    
                    task.wait(0.1)
                    nukeFlashTrack:AdjustSpeed(5)
                    
                    task.wait(0.3)
                    
                    local plankAnim = Instance.new("Animation")
                    plankAnim.AnimationId = "rbxassetid://3695333486"
                    flashRigidTrack = humanoid:LoadAnimation(plankAnim)
                    flashRigidTrack.Priority = Enum.AnimationPriority.Movement
                    flashRigidTrack:Play(0.1, 1, 0)
                end
            end
        else
            stopSpin()
            stopFlashAnimations()
            
            task.wait(0.2)
            
            if next(savedNukeFlashBody) then
                local player = game.Players.LocalPlayer
                local character = player.Character
                
                if character then
                    local humanoid = character:FindFirstChildOfClass("Humanoid")
                    if humanoid then
                        local restoreBody = {
                            [1] = savedNukeFlashBody.Torso,
                            [2] = savedNukeFlashBody.RightArm,
                            [3] = savedNukeFlashBody.LeftArm,
                            [4] = savedNukeFlashBody.RightLeg,
                            [5] = savedNukeFlashBody.LeftLeg,
                            [6] = savedNukeFlashBody.Head
                        }
                        
                        pcall(function()
                            game:GetService("ReplicatedStorage").Remotes.ChangeCharacterBody:InvokeServer(restoreBody)
                        end)
                        
                        savedNukeFlashBody = {}
                    end
                end
            end
        end
    end
})

local stopBallLoop = nil

local function BallVerticalLoop(target)
    local Players = game:GetService("Players")
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local player = Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local backpack = player:WaitForChild("Backpack")
    local WorkspaceCom = workspace:WaitForChild("WorkspaceCom")
    local ServerBalls = WorkspaceCom:WaitForChild("001_SoccerBalls")

    -- Função para pegar a bola
    local function GetBall()
        local ballName = "Soccer" .. player.Name
        local Ball = ServerBalls:FindFirstChild(ballName)
        if not Ball then
            local tool = ReplicatedStorage:FindFirstChild("RE") and ReplicatedStorage.RE:FindFirstChild("1Too1l")
            if tool then
                tool:InvokeServer("PickingTools", "SoccerBall")
                repeat task.wait() until backpack:FindFirstChild("SoccerBall")
                backpack.SoccerBall.Parent = character
                repeat task.wait() until ServerBalls:FindFirstChild(ballName)
                Ball = ServerBalls:FindFirstChild(ballName)
            end
        end
        return Ball
    end

    local Ball = GetBall()
    if not Ball then return end

    Ball.CanCollide = false
    Ball.Massless = true
    Ball.CustomPhysicalProperties = PhysicalProperties.new(0.0001,0,0)

    -- Checa alvo válido
    if not target or target == player then return end
    local tchar = target.Character
    if not tchar then return end
    local torso = tchar:FindFirstChild("UpperTorso") or tchar:FindFirstChild("Torso")
    if not torso then return end

    -- Limpar objetos físicos antigos
    for _, v in pairs(Ball:GetChildren()) do
        if v:IsA("BodyPosition") or v:IsA("BodyVelocity") or v:IsA("BodyGyro") then
            v:Destroy()
        end
    end

    -- Cria BodyPosition para manter a bola no torso
    local bp = Instance.new("BodyPosition")
    bp.MaxForce = Vector3.new(1e6,1e6,1e6)
    bp.P = 5e4
    bp.D = 100
    bp.Position = torso.Position
    bp.Parent = Ball

    local running = true
    local direction = 1
    local heightRange = 1 -- altura máxima de cima para baixo

    stopBallLoop = function()
        running = false
        if bp then bp:Destroy() end
    end

    -- Loop contínuo vertical
    local RunService = game:GetService("RunService")
    local connection
    connection = RunService.Heartbeat:Connect(function()
        if not running or not torso.Parent or not tchar:FindFirstChild("Humanoid") or tchar.Humanoid.Health <= 0 then
            connection:Disconnect()
            stopBallLoop()
            return
        end

        -- Reposiciona imediatamente se cair no chão
        if Ball.Position.Y < torso.Position.Y - heightRange then
            bp.Position = torso.Position + Vector3.new(0, heightRange/2, 0)
        else
            -- Movimento vertical contínuo
            direction = direction * -1
            local offset = Vector3.new(0, (heightRange/2) * direction, 0)
            bp.Position = torso.Position + offset
        end
    end)
end

-- Toggle Bola Vertical
Troll:AddToggle({
    Name = "Fling ball V2",
    Default = false,
    Callback = function(state)
        local target = game.Players:FindFirstChild(selectedPlayerName)
        if state then
            if target then
                BallVerticalLoop(target)
                print("Bola Vertical Ligada")
            else
                warn("Selecione um jogador!")
            end
        else
            if stopBallLoop then
                stopBallLoop()
                stopBallLoop = nil
                print("Bola Vertical Desligada")
            end
        end
    end
})

local stopFrontBall = nil

local function FrontBallSpin()

    local Players = game:GetService("Players")
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local RunService = game:GetService("RunService")

    local player = Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local hrp = character:WaitForChild("HumanoidRootPart")
    local backpack = player:WaitForChild("Backpack")

    local WorkspaceCom = workspace:WaitForChild("WorkspaceCom")
    local ServerBalls = WorkspaceCom:WaitForChild("001_SoccerBalls")

    -- Pegar bola
    local function GetBall()
        local ballName = "Soccer" .. player.Name
        local Ball = ServerBalls:FindFirstChild(ballName)

        if not Ball then
            local tool = ReplicatedStorage:FindFirstChild("RE") 
                and ReplicatedStorage.RE:FindFirstChild("1Too1l")

            if tool then
                tool:InvokeServer("PickingTools", "SoccerBall")
                repeat task.wait() until backpack:FindFirstChild("SoccerBall")
                backpack.SoccerBall.Parent = character
                repeat task.wait() until ServerBalls:FindFirstChild(ballName)
                Ball = ServerBalls:FindFirstChild(ballName)
            end
        end

        return Ball
    end

    local Ball = GetBall()
    if not Ball then return end

    Ball.CanCollide = false
    Ball.Massless = true
    Ball.CustomPhysicalProperties = PhysicalProperties.new(0.0001,0,0)

    -- Limpar forças antigas
    for _, v in pairs(Ball:GetChildren()) do
        if v:IsA("BodyPosition") 
        or v:IsA("BodyVelocity") 
        or v:IsA("BodyGyro") 
        or v:IsA("BodyAngularVelocity") then
            v:Destroy()
        end
    end

    -- Manter 5 studs na frente
    local bp = Instance.new("BodyPosition")
    bp.MaxForce = Vector3.new(1e6,1e6,1e6)
    bp.P = 5e4
    bp.D = 100
    bp.Parent = Ball

    -- Giro em volta dela mesma
    local bav = Instance.new("BodyAngularVelocity")
    bav.MaxTorque = Vector3.new(1e6,1e6,1e6)
    bav.AngularVelocity = Vector3.new(9e800, 9e800, 9e800)
    bav.Parent = Ball

    local running = true

    stopFrontBall = function()
        running = false
        if bp then bp:Destroy() end
        if bav then bav:Destroy() end
    end

    local connection
    connection = RunService.Heartbeat:Connect(function()
        if not running or not hrp.Parent then
            connection:Disconnect()
            stopFrontBall()
            return
        end

        -- 5 studs na frente baseado na direção que você está olhando
        bp.Position = hrp.Position + (hrp.CFrame.LookVector * 5)
    end)
end


-- Toggle
Troll:AddToggle({
    Name = "Front Ball Spin",
    Default = false,
    Callback = function(state)
        if state then
            FrontBallSpin()
            print("Front Ball Spin Ligado")
        else
            if stopFrontBall then
                stopFrontBall()
                stopFrontBall = nil
                print("Front Ball Spin Desligado")
            end
        end
    end
})

local stopOrbit = nil

local function OrbitBallCrazy()
    local Players = game:GetService("Players")
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local player = Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local hrp = character:WaitForChild("HumanoidRootPart")
    local backpack = player:WaitForChild("Backpack")
    local WorkspaceCom = workspace:WaitForChild("WorkspaceCom")
    local ServerBalls = WorkspaceCom:WaitForChild("001_SoccerBalls")

    -- Função para pegar a bola
    local function GetBall()
        local ballName = "Soccer" .. player.Name
        local Ball = ServerBalls:FindFirstChild(ballName)
        if not Ball then
            local tool = ReplicatedStorage:FindFirstChild("RE") and ReplicatedStorage.RE:FindFirstChild("1Too1l")
            if tool then
                tool:InvokeServer("PickingTools", "SoccerBall")
                repeat task.wait() until backpack:FindFirstChild("SoccerBall")
                backpack.SoccerBall.Parent = character
                repeat task.wait() until ServerBalls:FindFirstChild(ballName)
                Ball = ServerBalls:FindFirstChild(ballName)
            end
        end
        return Ball
    end

    local Ball = GetBall()
    if not Ball then return end

    Ball.CanCollide = false
    Ball.Massless = true
    Ball.CustomPhysicalProperties = PhysicalProperties.new(0.0001,0,0)

    -- Limpar objetos físicos antigos
    for _, v in pairs(Ball:GetChildren()) do
        if v:IsA("BodyPosition") or v:IsA("BodyVelocity") or v:IsA("BodyGyro") or v:IsA("BodyAngularVelocity") then
            v:Destroy()
        end
    end

    -- BodyPosition para orbitar
    local bp = Instance.new("BodyPosition")
    bp.MaxForce = Vector3.new(1e6,1e6,1e6)
    bp.P = 5e4
    bp.D = 100
    bp.Position = hrp.Position
    bp.Parent = Ball

    -- BodyAngularVelocity para giro louco extremo
    local bav = Instance.new("BodyAngularVelocity")
    bav.MaxTorque = Vector3.new(1e6,1e6,1e6)
    bav.AngularVelocity = Vector3.new(9e800,9e800,9e800) -- velocidade máxima louca
    bav.Parent = Ball

    local running = true
    local radius = 5
    local t = 0

    stopOrbit = function()
        running = false
        if bp then bp:Destroy() end
        if bav then bav:Destroy() end
    end

    local RunService = game:GetService("RunService")
    local connection
    connection = RunService.Heartbeat:Connect(function(dt)
        if not running or not hrp.Parent then
            connection:Disconnect()
            stopOrbit()
            return
        end

        -- Movimento louco: sin/cos para órbita 3D randomizada
        t = t + dt * 5
        local x = math.sin(t * 2) * radius
        local y = math.cos(t * 3) * radius / 2
        local z = math.sin(t * 4) * radius
        bp.Position = hrp.Position + Vector3.new(x, y, z)
    end)
end

-- Toggle Bola Orbit Louca
Troll:AddToggle({
    Name = "Orbit Ball V2",
    Default = false,
    Callback = function(state)
        if state then
            OrbitBallCrazy()
            print("Bola Orbit Louca Ligada")
        else
            if stopOrbit then
                stopOrbit()
                stopOrbit = nil
                print("Bola Orbit Louca Desligada")
            end
        end
    end
})

local stopOrbitSelf = nil

local function OrbitBallSelf()

    local Players = game:GetService("Players")
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local RunService = game:GetService("RunService")

    local player = Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local hrp = character:WaitForChild("HumanoidRootPart")
    local backpack = player:WaitForChild("Backpack")

    local WorkspaceCom = workspace:WaitForChild("WorkspaceCom")
    local ServerBalls = WorkspaceCom:WaitForChild("001_SoccerBalls")

    -- Pegar bola
    local function GetBall()
        local ballName = "Soccer" .. player.Name
        local Ball = ServerBalls:FindFirstChild(ballName)

        if not Ball then
            local tool = ReplicatedStorage:FindFirstChild("RE") 
                and ReplicatedStorage.RE:FindFirstChild("1Too1l")

            if tool then
                tool:InvokeServer("PickingTools", "SoccerBall")
                repeat task.wait() until backpack:FindFirstChild("SoccerBall")
                backpack.SoccerBall.Parent = character
                repeat task.wait() until ServerBalls:FindFirstChild(ballName)
                Ball = ServerBalls:FindFirstChild(ballName)
            end
        end

        return Ball
    end

    local Ball = GetBall()
    if not Ball then return end

    Ball.CanCollide = false
    Ball.Massless = true
    Ball.CustomPhysicalProperties = PhysicalProperties.new(0.0001,0,0)

    -- Limpar forças antigas
    for _, v in pairs(Ball:GetChildren()) do
        if v:IsA("BodyPosition")
        or v:IsA("BodyVelocity")
        or v:IsA("BodyGyro")
        or v:IsA("BodyAngularVelocity") then
            v:Destroy()
        end
    end

    -- Manter órbita
    local bp = Instance.new("BodyPosition")
    bp.MaxForce = Vector3.new(1e6,1e6,1e6)
    bp.P = 5e4
    bp.D = 100
    bp.Parent = Ball

    -- Giro próprio extremamente rápido
    local bav = Instance.new("BodyAngularVelocity")
    bav.MaxTorque = Vector3.new(1e6,1e6,1e6)
    bav.AngularVelocity = Vector3.new(99e800, 99e800, 99e800)
    bav.Parent = Ball

    local running = true
    local radius = 4
    local angle = 0

    stopOrbitSelf = function()
        running = false
        if bp then bp:Destroy() end
        if bav then bav:Destroy() end
    end

    local connection
    connection = RunService.Heartbeat:Connect(function(dt)

        if not running or not hrp.Parent then
            connection:Disconnect()
            stopOrbitSelf()
            return
        end

        -- Velocidade da órbita
        angle = angle + dt * 20

        local x = math.cos(angle) * radius
        local z = math.sin(angle) * radius
        local y = 1.5 -- leve altura

        bp.Position = hrp.Position + Vector3.new(x, y, z)
    end)
end


-- Toggle
Troll:AddToggle({
    Name = "Orbit Ball",
    Default = false,
    Callback = function(state)
        if state then
            OrbitBallSelf()
            print("Orbit 4 Studs Ligado")
        else
            if stopOrbitSelf then
                stopOrbitSelf()
                stopOrbitSelf = nil
                print("Orbit 4 Studs Desligado")
            end
        end
    end
})